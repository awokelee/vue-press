(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{343:function(e,v,_){"use strict";_.r(v);var t=_(0),a=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("div",{staticClass:"content"},[_("h1",{attrs:{id:"高级-1：不喜欢-merge-的分叉？用-rebase-吧"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#高级-1：不喜欢-merge-的分叉？用-rebase-吧","aria-hidden":"true"}},[e._v("#")]),e._v(" 高级 1：不喜欢 merge 的分叉？用 rebase 吧")]),_("p",[e._v("有些人不喜欢 "),_("code",[e._v("merge")]),e._v("，因为在 "),_("code",[e._v("merge")]),e._v(" 之后，"),_("code",[e._v("commit")]),e._v(" 历史就会出现分叉，这种分叉再汇合的结构会让有些人觉得混乱而难以管理。如果你不希望 "),_("code",[e._v("commit")]),e._v(" 历史出现分叉，可以用 "),_("code",[e._v("rebase")]),e._v(" 来代替 "),_("code",[e._v("merge")]),e._v("。")]),_("h2",{attrs:{id:"rebase——在新位置重新提交"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#rebase——在新位置重新提交","aria-hidden":"true"}},[e._v("#")]),e._v(" rebase——在新位置重新提交")]),_("p",[_("code",[e._v("rebase")]),e._v(" ，又是一个中国人看不懂的词。这个词的意思，你如果查一下的话：")]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdea7b6422ac3a?w=160&h=128&f=jpeg&s=8608",alt:""}})]),_("blockquote",[_("p",[e._v("哈？玩个 Git 就弯了？")])]),_("p",[e._v("其实这个翻译还是比较准确的。"),_("code",[e._v("rebase")]),e._v(" 的意思是，给你的 "),_("code",[e._v("commit")]),e._v(" 序列重新设置基础点（也就是父 "),_("code",[e._v("commit")]),e._v("）。展开来说就是，把你指定的 "),_("code",[e._v("commit")]),e._v(" 以及它所在的 "),_("code",[e._v("commit")]),e._v(" 串，以指定的目标 "),_("code",[e._v("commit")]),e._v(" 为基础，依次重新提交一次。例如下面这个 "),_("code",[e._v("merge")]),e._v("：")]),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("git merge branch1\n")])])]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdea7b6646a1f3?w=640&h=454&f=gif&s=175263",alt:""}})]),_("p",[e._v("如果把 "),_("code",[e._v("merge")]),e._v(" 换成 "),_("code",[e._v("rebase")]),e._v("，可以这样操作：")]),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("git checkout branch1\ngit rebase master\n")])])]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/11/30/1600abd620a8e28c?w=698&h=518&f=gif&s=337134",alt:""}})]),_("p",[e._v("可以看出，通过 "),_("code",[e._v("rebase")]),e._v("，"),_("code",[e._v("5")]),e._v(" 和 "),_("code",[e._v("6")]),e._v(" 两条 "),_("code",[e._v("commit")]),e._v("s 把基础点从 "),_("code",[e._v("2")]),e._v(" 换成了 "),_("code",[e._v("4")]),e._v(" 。通过这样的方式，就让本来分叉了的提交历史重新回到了一条线。这种「重新设置基础点」的操作，就是 "),_("code",[e._v("rebase")]),e._v(" 的含义。")]),_("p",[e._v("另外，在 "),_("code",[e._v("rebase")]),e._v(" 之后，记得切回 "),_("code",[e._v("master")]),e._v(" 再 "),_("code",[e._v("merge")]),e._v(" 一下，把 "),_("code",[e._v("master")]),e._v(" 移到最新的 "),_("code",[e._v("commit")]),e._v("：")]),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("git checkout master\ngit merge branch1\n")])])]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/12/2/160149e054fe485c?w=706&h=456&f=gif&s=207406",alt:""}})]),_("blockquote",[_("p",[e._v("为什么要从 "),_("code",[e._v("branch1")]),e._v(" 来 "),_("code",[e._v("rebase")]),e._v("，然后再切回 "),_("code",[e._v("master")]),e._v(" 再 "),_("code",[e._v("merge")]),e._v(" 一下这么麻烦，而不是直接在 "),_("code",[e._v("master")]),e._v(" 上执行 "),_("code",[e._v("rebase")]),e._v("？")]),_("p",[e._v("从图中可以看出，"),_("code",[e._v("rebase")]),e._v(" 后的 "),_("code",[e._v("commit")]),e._v(" 虽然内容和 "),_("code",[e._v("rebase")]),e._v(" 之前相同，但它们已经是不同的 "),_("code",[e._v("commits")]),e._v(" 了。如果直接从 "),_("code",[e._v("master")]),e._v(" 执行 "),_("code",[e._v("rebase")]),e._v(" 的话，就会是下面这样：")]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/12/2/16014b5a6919c0b7?w=650&h=428&f=gif&s=173918",alt:""}})]),_("p",[e._v("这就导致 "),_("code",[e._v("master")]),e._v(" 上之前的两个最新 "),_("code",[e._v("commit")]),e._v(" 被剔除了。如果这两个 "),_("code",[e._v("commit")]),e._v(" 之前已经在中央仓库存在，这就会导致没法 "),_("code",[e._v("push")]),e._v(" 了：")]),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/12/2/16014bc64d4337f8?w=643&h=640&f=jpeg&s=58468",alt:""}})]),_("p",[e._v("所以，为了避免和远端仓库发生冲突，一般不要从 "),_("code",[e._v("master")]),e._v(" 向其他 "),_("code",[e._v("branch")]),e._v(" 执行 "),_("code",[e._v("rebase")]),e._v(" 操作。而如果是 "),_("code",[e._v("master")]),e._v(" 以外的 "),_("code",[e._v("branch")]),e._v(" 之间的 "),_("code",[e._v("rebase")]),e._v("（比如 "),_("code",[e._v("branch1")]),e._v(" 和 "),_("code",[e._v("branch2")]),e._v(" 之间），就不必这么多费一步，直接 "),_("code",[e._v("rebase")]),e._v(" 就好。")])]),_("h2",{attrs:{id:"小结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[e._v("#")]),e._v(" 小结")]),_("p",[e._v("本节介绍的是 "),_("code",[e._v("rebase")]),e._v(" 指令，它可以改变 "),_("code",[e._v("commit")]),e._v(" 序列的基础点。它的使用方式很简单：")]),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("git rebase 目标基础点\n")])])]),_("p",[e._v("需要说明的是，"),_("code",[e._v("rebase")]),e._v(" 是站在需要被 "),_("code",[e._v("rebase")]),e._v(" 的 "),_("code",[e._v("commit")]),e._v(" 上进行操作，这点和 "),_("code",[e._v("merge")]),e._v(" 是不同的。")])])}],!1,null,null,null);v.default=a.exports}}]);